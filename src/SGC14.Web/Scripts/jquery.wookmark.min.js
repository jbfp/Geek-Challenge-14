/*!
  jQuery Wookmark plugin
  @name jquery.wookmark.js
  @author Christoph Ono (chri@sto.ph or @gbks)
  @author Sebastian Helzle (sebastian@helzle.net or @sebobo)
  @version 1.4.8
  @date 07/08/2013
  @category jQuery plugin
  @copyright (c) 2009-2014 Christoph Ono (www.wookmark.com)
  @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
*/
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){function o(n){e(function(){for(var i,t=0;t<n.length;t++)i=n[t],i.obj.css(i.css)})}function r(t){return n.trim(t).toLowerCase()}var u,f,t,e,i;t=function(n,t){return function(){return n.apply(t,arguments)}};f={align:"center",autoResize:!1,comparator:null,container:n("body"),direction:undefined,ignoreInactiveItems:!0,itemWidth:0,fillEmptySpace:!1,flexibleWidth:0,offset:2,outerOffset:0,onLayoutChanged:undefined,possibleFilters:[],resizeDelay:50,verticalOffset:undefined};e=window.requestAnimationFrame||function(n){n()};i=n(window);u=function(){function u(r,u){this.handler=r;this.columns=this.containerWidth=this.resizeTimer=null;this.activeItemCount=0;this.itemHeightsDirty=!0;this.placeholders=[];n.extend(!0,this,f,u);this.verticalOffset=this.verticalOffset||this.offset;this.update=t(this.update,this);this.onResize=t(this.onResize,this);this.onRefresh=t(this.onRefresh,this);this.getItemWidth=t(this.getItemWidth,this);this.layout=t(this.layout,this);this.layoutFull=t(this.layoutFull,this);this.layoutColumns=t(this.layoutColumns,this);this.filter=t(this.filter,this);this.clear=t(this.clear,this);this.getActiveItems=t(this.getActiveItems,this);this.refreshPlaceholders=t(this.refreshPlaceholders,this);this.sortElements=t(this.sortElements,this);this.updateFilterClasses=t(this.updateFilterClasses,this);this.updateFilterClasses();this.autoResize&&i.bind("resize.wookmark",this.onResize);this.container.bind("refreshWookmark",this.onRefresh)}return u.prototype.updateFilterClasses=function(){for(var f=0,i=0,e=0,n={},t,o,u,h=this.possibleFilters,s;f<this.handler.length;f++)if(o=this.handler.eq(f),t=o.data("filterClass"),typeof t=="object"&&t.length>0)for(i=0;i<t.length;i++)u=r(t[i]),typeof n[u]=="undefined"&&(n[u]=[]),n[u].push(o[0]);for(;e<h.length;e++)s=r(h[e]),s in n||(n[s]=[]);this.filterClasses=n},u.prototype.update=function(t){this.itemHeightsDirty=!0;n.extend(!0,this,t)},u.prototype.onResize=function(){clearTimeout(this.resizeTimer);this.itemHeightsDirty=this.flexibleWidth!==0;this.resizeTimer=setTimeout(this.layout,this.resizeDelay)},u.prototype.onRefresh=function(){this.itemHeightsDirty=!0;this.layout()},u.prototype.filter=function(t,i,u){var o=[],c,s=n(),f,l,a,p,e,h,v,w,y;if(t=t||[],i=i||"or",u=u||!1,t.length){for(f=0;f<t.length;f++)p=r(t[f]),p in this.filterClasses&&o.push(this.filterClasses[p]);if(c=o.length,i=="or"||c==1)for(f=0;f<c;f++)s=s.add(o[f]);else if(i=="and"){for(e=o[0],h=!0,f=1;f<c;f++)o[f].length<e.length&&(e=o[f]);for(e=e||[],f=0;f<e.length;f++){for(w=e[f],h=!0,l=0;l<o.length&&h;l++)if(y=o[l],e!=y){for(a=0,v=!1;a<y.length&&!v;a++)v=y[a]==w;h&=v}h&&s.push(e[f])}}u||this.handler.not(s).addClass("inactive")}else s=this.handler;return u||(s.removeClass("inactive"),this.columns=null,this.layout()),s},u.prototype.refreshPlaceholders=function(t,i){for(var r=this.placeholders.length,u,e,c=this.columns.length,f,o,s,h,l=this.container.innerHeight();r<c;r++)u=n('<div class="wookmark-placeholder"/>').appendTo(this.container),this.placeholders.push(u);for(h=this.offset+parseInt(this.placeholders[0].css("borderLeftWidth"),10)*2,r=0;r<this.placeholders.length;r++)if(u=this.placeholders[r],f=this.columns[r],r>=c||!f[f.length-1])u.css("display","none");else{if(e=f[f.length-1],!e)continue;s=e.data("wookmark-top")+e.data("wookmark-height")+this.verticalOffset;o=l-s-h;u.css({position:"absolute",display:o>0?"block":"none",left:r*t+i,top:s,width:t-h,height:o})}},u.prototype.getActiveItems=function(){return this.ignoreInactiveItems?this.handler.not(".inactive"):this.handler},u.prototype.getItemWidth=function(){var n=this.itemWidth,i=this.container.width()-2*this.outerOffset,f=this.handler.eq(0),t=this.flexibleWidth;if(this.itemWidth!==undefined&&(this.itemWidth!==0||this.flexibleWidth)?typeof this.itemWidth=="string"&&this.itemWidth.indexOf("%")>=0&&(n=parseFloat(this.itemWidth)/100*i):n=f.outerWidth(),t){typeof t=="string"&&t.indexOf("%")>=0&&(t=parseFloat(t)/100*i);var r=i+this.offset,e=~~(.5+r/(t+this.offset)),o=~~(r/(n+this.offset)),u=Math.max(e,o),s=Math.min(t,~~((i-(u-1)*this.offset)/u));n=Math.max(n,s);this.handler.css("width",n)}return n},u.prototype.layout=function(n){if(this.container.is(":visible")){var t=this.getItemWidth()+this.offset,c=this.container.width(),o=c-2*this.outerOffset,i=~~((o+this.offset)/t),r=0,s=0,f=0,h=this.getActiveItems(),u=h.length,e;if(this.itemHeightsDirty||!this.container.data("itemHeightsInitialized")){for(;f<u;f++)e=h.eq(f),e.data("wookmark-height",e.outerHeight());this.itemHeightsDirty=!1;this.container.data("itemHeightsInitialized",!0)}i=Math.max(1,Math.min(i,u));r=this.outerOffset;this.align=="center"&&(r+=~~(.5+(o-(i*t-this.offset))>>1));this.direction=this.direction||(this.align=="right"?"right":"left");s=n||this.columns===null||this.columns.length!=i||this.activeItemCount!=u?this.layoutFull(t,i,r):this.layoutColumns(t,r);this.activeItemCount=u;this.container.css("height",s);this.fillEmptySpace&&this.refreshPlaceholders(t,r);this.onLayoutChanged!==undefined&&typeof this.onLayoutChanged=="function"&&this.onLayoutChanged()}},u.prototype.sortElements=function(n){return typeof this.comparator=="function"?n.sort(this.comparator):n},u.prototype.layoutFull=function(t,i,r){var s,c=0,f=0,l=n.makeArray(this.getActiveItems()),y=l.length,h=null,e=null,a,u=[],v=[],p=this.align=="left"?!0:!1;for(this.columns=[],l=this.sortElements(l);u.length<i;)u.push(this.outerOffset),this.columns.push([]);for(;c<y;c++){for(s=n(l[c]),h=u[0],e=0,f=0;f<i;f++)u[f]<h&&(h=u[f],e=f);s.data("wookmark-top",h);a=r;(e>0||!p)&&(a+=e*t);(v[c]={obj:s,css:{position:"absolute",top:h}}).css[this.direction]=a;u[e]+=s.data("wookmark-height")+this.verticalOffset;this.columns[e].push(s)}return o(v),Math.max.apply(Math,u)},u.prototype.layoutColumns=function(n,t){for(var u=[],h=[],i=0,f=0,c=0,r,e,s,l;i<this.columns.length;i++){for(u.push(this.outerOffset),e=this.columns[i],l=i*n+t,r=u[i],f=0;f<e.length;f++,c++)s=e[f].data("wookmark-top",r),(h[c]={obj:s,css:{top:r}}).css[this.direction]=l,r+=s.data("wookmark-height")+this.verticalOffset;u[i]=r}return o(h),Math.max.apply(Math,u)},u.prototype.clear=function(){clearTimeout(this.resizeTimer);i.unbind("resize.wookmark",this.onResize);this.container.unbind("refreshWookmark",this.onRefresh);this.handler.wookmarkInstance=null},u}();n.fn.wookmark=function(n){return this.wookmarkInstance?this.wookmarkInstance.update(n||{}):this.wookmarkInstance=new u(this,n||{}),this.wookmarkInstance.layout(!0),this.show()}});
/*
//# sourceMappingURL=jquery.wookmark.min.js.map
*/